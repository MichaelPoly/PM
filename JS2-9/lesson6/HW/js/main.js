function Container(e){this.id=e,this.className="",this.htmlCode=""}function Basket2(){Container.call(this,"basket2"),this.cost=0,this.amount=0,this.basketItems=[]}Container.prototype.render=function(){return this.htmlCode},Basket2.prototype=Object.create(Container.prototype),Basket2.prototype.constructor=Basket2,$(document).ready(function(){}),$(document).ready(function(){$("#feedbacktWindow").hide(),$("#feedback").on("click",function(){$("#feedbacktWindow").show()}),$("#firstName").tooltip({items:"input[placeholder]",content:"Имя должно содержать только буквы"}),$("#LastName").tooltip({items:"input[placeholder]",content:"Фамилия может содержать только буквы и -"}),$("#PhoneNumber").tooltip({items:"input[placeholder]",content:"Введите телефон в формате +7 000-000-00-00"}),$("#Email").tooltip({items:"input[placeholder]",content:"Email должен содержать @"}),$("#submitt").on("click",function(){var e=/[a-zA-Zа-яёА-ЯЁ]/i,t=document.querySelector("#firstName"),a=e.test(t.value),n=/[a-zA-Zа-яёА-ЯЁ-]/i,o=document.querySelector("#LastName"),s=n.test(o.value),i=/\+[7]\s[0-9]{3}-[0-9]{3}-[0-9]{2}-[0-9]{2}/i,p=document.querySelector("#PhoneNumber"),d=i.test(p.value),c=/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/i,m=document.querySelector("#Email"),r=c.test(m.value),l=document.querySelector("#textBox");if(0==a&&(t.style="border-color: red;",t.placeholder="Имя должно содержать только буквы",$("#firstName").effect("bounce",{},1e3)),0==s&&(o.style="border-color: red;",o.placeholder="Фамилия может содержать только буквы и -",$("#LastName").effect("bounce",{},1e3)),0==d&&(p.style="border-color: red;",p.placeholder="+7 000-000-00-00",$("#PhoneNumber").effect("bounce",{},1e3)),0==r&&(m.style="border-color: red;",m.placeholder="Некорректный Email",$("#Email").effect("bounce",{},1e3)),""==l.value){l.style="border-color: red;",l.placeholder="Введите текст сообщения",$("#textBox").effect("bounce",{},1e3);var u=!1}1==a&&1==s&&1==d&&1==r&&0!=u&&($("#feedbacktWindow").fadeOut(),$(".dialog").dialog())}),$(window).on("mousemove",function(){$("#banner1").effect("bounce",{},1e3),$("#banner1").effect("shake",{},1e3)}),$("#banner").on("mouseover",function(){$("#banner").effect("pulsate",{},1e3)})}),$(document).ready(function(){function e(){var e=$("#quantity");e.empty(),e.append("<p>"+t.amount+"</p>");var a=$("#cost");a.empty(),a.append("<p>"+t.cost+"</p>")}var t=new Basket2;$("#itemWindow").hide(),$("#moderatorWindow").hide(),$("#basketWindow").hide();var a=[],n=[];$.ajax({type:"GET",url:"./message.json",dataType:"json",success:function(e){n=e}}),$.ajax({type:"GET",url:"./items.json",dataType:"json",success:function(o){a=o;for(var s=0;s<o.length;s++){var i=o[s].itemCode;i="Item"+i,$("#centerBlock").append("<div id="+i+' class="itemsBlocks"></div>'),$oneItem="sub"+i,$("#"+i).append("<div id="+$oneItem+' class="subItemsBlocks"></div>');var p=o[s].name;$("#"+$oneItem).append("<p>"+p+"</p>");var d=o[s].imgHref;$("#"+$oneItem).append('<img src="'+d+'">');var c=o[s].price;$("#"+$oneItem).append('<p id="price'+i+'">Цена: '+c+"</p>"),$("#"+i).append('<button type="button" id="btn'+i+'" class="itemBtn">Купить</button>')}$(".itemBtn").on("click",function(){var n=this.id;++t.amount;var o=n.slice(7),s=a[parseInt(o)-1].price;t.cost=parseInt(t.cost)+parseInt(s),t.basketItems.push(a[parseInt(o)-1]),e()}),$(".subItemsBlocks").on("click",function(){$("#itemWindow").show();var o=this.id,s="subItem"+i,i=parseInt(o.slice(7))-1,p=a[i].imgHref,d=a[i].name,c=a[i].describtion,m=a[i].price;$("#itemWindow").append("<div id="+s+' class="subItem"></div>'),$("#"+s).append("<h3>"+d+"</h3>"),$("#"+s).append('<div id="infoBlock"></div>'),$("#infoBlock").append('<img src="'+p+'">'),$("#infoBlock").append("<p>Краткое описание:</p>"),$("#infoBlock").append('<p id="describtion">'+c+"</p>"),$("#infoBlock").append("<p>Цена: "+m+"</p>"),$("#"+s).append('<div id="btnBlock"></div>'),$("#btnBlock").append('<button type="button" id="butn'+o+'" class="itemBtn1">Добавить в корзину</button>'),$("#btnBlock").append('<button type="button" id="butnClose">Вернуться к покупкам</button>'),$("#butnClose").on("click",function(){$("#itemWindow").fadeOut(),$(".subItem").remove()}),$(".itemBtn1").on("click",function(){var n=this.id;++t.amount;var o=n.slice(11),s=a[parseInt(o)-1].price;t.cost=parseInt(t.cost)+parseInt(s),t.basketItems.push(a[parseInt(o)-1]),e()}),$("#"+s).append('<div id="messageBlock"></div>'),$("#messageBlock").append('<div id="messageForm"></div>'),$("#messageForm").append('<input type="text" id="UserName" placeholder="Введите Ваше имя"></input>'),$("#messageForm").append('<textarea rows="5" cols="45" id="userMessage"></textarea>'),$("#messageForm").append('<button type="button" id="butnSubmitt">Отправить отзыв</button>'),$("#butnSubmitt").on("click",function(){var e=o.slice(7),t=document.querySelector("#UserName").value,a=document.querySelector("#userMessage").value,s={itemCode:e,userName:t,moderate:"false",message:a};n.push(s),$("#itemWindow").fadeOut(),$(".subItem").remove()});for(var r=0;r<n.length;r++){var l=o.slice(7);n[r].itemCode==l&&"true"==n[r].moderate&&$("#messageBlock").append("<p>"+n[r].userName+":   "+n[r].message+"</p>")}})}}),$("#moderator").on("click",function(){$("#moderatorWindow").show(),$("#moderatorWindow").append('<div id="messageContent"></div>'),$("#messageContent").append('<button type="button" id="endModeration">Сохранить и выйти из окна модерации</button>');for(var e=0;e<n.length;e++){$("#messageContent").append('<div id="messageRaw'+e+'" class="messageRaw"></div>');var t="#messageRaw"+e;$(t).append("<p>Код товара:"+n[e].itemCode+" Автор: "+n[e].userName+" Отзыв: "+n[e].message+"</p>"),"true"==n[e].moderate?$(t).append('<input type="checkbox" checked id="mess'+e+'">'):$(t).append('<input type="checkbox" id="mess'+e+'">')}$("#messageContent").append('<div id="messageRawName" class="messageRaw"></div>'),$("#messageRawName").append("<p>Список отзывов</p>"),$("#messageRawName").append("<p>Одобрено модератором</p>"),$("#endModeration").on("click",function(){for(var e=[],t=0;t<n.length;t++){var a=String(document.querySelector("#mess"+t).checked);a!=n[t].moderate&&(e.push(t),n[t].moderate=a)}for(var t=0;t<e.length;t++)"false"==n[e[t]].moderate&&n[e[t]].remove();$("#moderatorWindow").hide(),$("#messageContent").remove()})}),$("#basket").on("click",function(){$("#basketWindow").show(),$("#basketWindow").append('<div id="basketContent"></div>'),$("#basketContent").append("<h3>Ваша корзина</h3>"),$basketItems1=t.basketItems,$("#basketContent").append('<div id="itemRawName" class="itemRaw"></div>'),$("#itemRawName").append('<p class="nn">п/п</p>'),$("#itemRawName").append('<p class="itemInBasket">Наименование товара</p>'),$("#itemRawName").append('<p class="priceInBasket">Цена</p>');for(var a=0;a<$basketItems1.length;a++){$("#basketContent").append('<div id="itemRaw'+a+'" class="itemRaw"></div>');var n=a+1;$("#itemRaw"+a).append('<p class="nn">'+n+": </p>"),$("#itemRaw"+a).append('<p class="itemInBasket">'+$basketItems1[a].name+"</p>"),$("#itemRaw"+a).append('<p class="priceInBasket">'+$basketItems1[a].price+"</p>"),$("#itemRaw"+a).append('<button type="button" id="btnDel'+a+'" class="btnDel">Удалить из корзины</button>')}$("#basketContent").append('<div id="itemRawAll" class="itemRaw"></div>'),$("#itemRawAll").append('<p class="nn"></p>'),$("#itemRawAll").append('<p class="itemInBasket">Всего товаров в корзине:'+t.amount+"</p>"),$("#itemRawAll").append('<p class="priceInBasket">Сумма: '+t.cost+"</p>"),$("#basketContent").append('<button type="button" id="btnClose1">Вернуться к покупкам</button>'),$("#btnClose1").on("click",function(){$("#basketWindow").fadeOut(),$("#basketContent").remove()}),$(".btnDel").on("click",function(){for(var a=parseInt(this.id.slice(6)),n=[],o=0;o<t.basketItems.length;o++)o!=a&&n.push(t.basketItems[o]);t.basketItems=[],t.basketItems=n,console.log(n[a]),--t.amount,console.log(t.amount),t.cost=t.cost-$basketItems1[a].price,console.log(t.cost),$("#itemRaw"+a).remove(),$("#itemRawAll").remove(),$("#basketContent").append('<div id="itemRawAll" class="itemRaw"></div>'),$("#itemRawAll").append('<p class="nn"></p>'),$("#itemRawAll").append('<p class="itemInBasket">Всего товаров в корзине:'+t.amount+"</p>"),$("#itemRawAll").append('<p class="priceInBasket">Сумма: '+t.cost+"</p>"),e()})})});